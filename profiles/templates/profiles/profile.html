{% extends "base.html" %}
{% load static %}


{% block extra_css %}
    <link rel="stylesheet" href="{% static 'profiles/css/profile.css' %}">
{% endblock %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container">
    <div class="row">
        <div class="col">
            <hr>
            <h2 class="logo-font mb-4">My Profile</h2>
            <hr>
        </div>
    </div>
    {{ profile }}
{% endblock %}

<!-- Since we can't render Django template variables in external javascript files.
We need to use a built-in template filter called json_script
To render them here. And then we can access them in the external file. -->

{% block postloadjs %}
    {{ block.super }}
    {{ stripe_public_key|json_script:"id_stripe_public_key" }}
    {{ client_secret|json_script:"id_client_secret" }}
    <script src="{% static 'checkout/js/stripe_elements.js' %}"></script>
{% endblock %}

<!-- Stripe works with what are called payment intents.
The process will be that when a user hits the checkout page
the checkout view will call out to stripe and create a payment intent
for the current amount of the shopping bag.
When stripe creates it. it'll also have a secret that identifies it.
Which will be returned to us and we'll send it to the template as the client secret variable.
Then in the JavaScript on the client side.
We'll call the confirm card payment method from stripe js.
Using the client secret which will verify the card number.
 -->